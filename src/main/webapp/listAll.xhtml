<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xml:lang="en"
        xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
        <title>Lista de Agendamentos</title>
</h:head>
<f:view>
    <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false"
              resizable="false">
        <p:graphicImage name="/images/ajaxloadingbar.gif"/>
    </p:dialog>    
    <h:body enctype="multipar/form-data">
        <h:form id="formAgendamento" prependId="false">
            <p:commandLink process="@this" update="tabelaExam" action="#{buscarAvailabilityApi.availabilityApi}" value="Recarregar a listagem!" >
                <p:graphicImage name="/images/refresh.png" alt="Recarregar listagem!" width="24"/>
            </p:commandLink>
            <p:growl id="mensagens" showDetail="true" autoUpdate="true" closable="true">
                <p:autoUpdate/>
            </p:growl>
            <p:dataTable id="tabelaExam" var="item" value="#{buscarAvailabilityApi.availabilityAll}"                        
                                                                                                                          >                                
                <p:column headerText="Inscrição" style="width: 6%;">         
                    <h:outputText id="outputId"
                                  value="#{item.codesubscription}"/>
                </p:column>
                <p:column headerText="Tipo de Certificação" style="width: 25%;"                          
                          >
                    <h:outputText id="outputName"
                                  value="#{item.typecertification}"/>
                </p:column>
                <p:column headerText="NOME" style="width: 10%;" sortBy="#{item.candidate.name}">
                    <h:outputText value="#{item.candidate.name}"/>
                </p:column>
                <p:column headerText="Endereço" style="width: 10%;">
                    <h:outputText value="#{item.codesubscription}"/>
                </p:column>
                <p:column headerText="Sala" style="width: 10%;">
                    <h:outputText value="#{item.availability.room.name}" />
                </p:column>
                <p:column headerText="Sala endereço" style="width: 10%;">
                    <h:outputText value="#{item.availability.room.address}"/>
                </p:column>                
                <p:column headerText="Data inscrição" pattern="dd/MM/yyyy HH:mm" style="width: 10%;" sortBy="#{item.dateCreateRegister}">                          
                    <h:outputText value="#{item.availability.availableTimeStart}">                                       
                    </h:outputText>
                </p:column>                                
            </p:dataTable>
       </h:form>
    </h:body>
</f:view>
</html>
